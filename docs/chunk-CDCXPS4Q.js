import{a as n}from"./chunk-EVW3OSRJ.js";import{a as i,ac as c,b as a,bc as d,ec as l,fc as u}from"./chunk-V37LJECA.js";var m={items:[],loading:!1,error:null},f=d({name:"cart",reducer:u(m,l(n.load,r=>a(i({},r),{loading:!0,error:null})),l(n.loadSuccess,(r,{items:e})=>a(i({},r),{items:e,loading:!1,error:null})),l(n.loadFailure,(r,{error:e})=>a(i({},r),{loading:!1,error:e})),l(n.addToCart,(r,{product:e})=>r.items.find(t=>t.product.id===e.id)?a(i({},r),{items:r.items.map(t=>t.product.id===e.id?a(i({},t),{quantity:t.quantity+1}):t)}):a(i({},r),{items:[...r.items,{product:e,quantity:1}]})),l(n.removeFromCart,(r,{productId:e})=>a(i({},r),{items:r.items.filter(o=>o.product.id!==e)})),l(n.updateQuantity,(r,{productId:e,quantity:o})=>a(i({},r),{items:o>0?r.items.map(t=>t.product.id===e?a(i({},t),{quantity:o}):t):r.items.filter(t=>t.product.id!==e)})),l(n.clearCart,r=>a(i({},r),{items:[]}))),extraSelectors:({selectItems:r})=>({selectCartCount:c(r,e=>e.reduce((o,t)=>o+t.quantity,0)),selectCartTotal:c(r,e=>e.reduce((o,t)=>o+t.product.price*t.quantity,0))})});export{f as a};
